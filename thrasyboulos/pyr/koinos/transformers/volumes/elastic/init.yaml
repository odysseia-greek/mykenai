apiVersion: builtin
kind: PatchTransformer
metadata:
  name: elastic-only-volume-transformer
patch: |
  - op: add
    path: /spec/template/spec/volumes
    value: []
  - op: add
    path: /spec/template/spec/volumes/-
    value:
      name: elastic-internal-tls
      secret:
        secretName: aristoteles-es-http-certs-public
target:
  kind: Deployment
  annotationSelector: "volumes.odysseia.io/elastic-only=true"