# thrasyboulos/pyr/koinos/stoicheia/peisistratos.yaml
- op: add
  path: /spec/template/spec/initContainers
  value:
      - name: "periandros"
        image: ghcr.io/odysseia-greek/periandros:v0.1.3
        imagePullPolicy: Always
        env:
          - name: POD_NAME
            valueFrom:
              fieldRef:
                fieldPath: metadata.name
          - name: NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: ELASTIC_ROLE
            valueFrom:
              fieldRef:
                fieldPath: metadata.annotations['odysseia-greek/role']
          - name: ELASTIC_ACCESS
            valueFrom:
              fieldRef:
                fieldPath: metadata.annotations['odysseia-greek/access']
          - name: SOLON_SERVICE
            value: https://solon.delphi.svc:5443
        volumeMounts:
          - name: solon-certs
            mountPath: /app/config/solon
            readOnly: true
